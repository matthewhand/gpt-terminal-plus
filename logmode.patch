--- src/routes/index.ts
+++ src/routes/index.ts
@@ -20,6 +20,7 @@
 import shellSessionRoutes from './shell/session';
 import { checkAuthToken } from '../middlewares/checkAuthToken';
 import { initializeServerHandler } from '../middlewares/initializeServerHandler';
+import { logMode } from '../middleware/logMode';
 
 /** Optional route groups (exist in this repo tree used by tests) */
 let setupRoutes: express.Router | null = null;
@@ -38,6 +39,7 @@
 export function setupApiRouter(app: express.Application): void {
   const isTest = process.env.NODE_ENV === 'test';
   const alwaysEnable = isTest; // enable optional endpoints during tests
   const cfg = convictConfig();
+  app.use(logMode);
 
   // ----- Command endpoints -----
   if (isTest) {
