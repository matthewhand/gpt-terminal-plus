const mondaySdk = require('monday-sdk-js'); const monday = mondaySdk(); monday.setToken(process.env.MONDAY_TOKEN); const boardId = 2809374317; const genres = { 'Picard': 'Sci-Fi', 'QI': 'Comedy', 'Bob\'s Burgers': 'Animated Sitcom', 'Last Week Tonight with John Oliver': 'News Satire', 'Our Flag Means Death': 'Historical Comedy', 'Only Murders in the Building': 'Mystery-Comedy', 'Crossing Swords': 'Animated Fantasy', '9-1-1': 'Procedural Drama', 'Ted Lasso': 'Sports Comedy-Drama', 'Dirty Jobs': 'Reality TV', 'The Simpsons': 'Animated Sitcom', 'It\'s Always Sunny in Philadelphia': 'Sitcom', 'Berlin Station': 'Spy Drama', 'Barry': 'Dark Comedy', 'Curb Your Enthusiasm': 'Comedy', 'Saturday Night Live': 'Variety Show', 'Dave': 'Comedy', 'Kroll Show': 'Sketch Comedy', 'Warrior': 'Action Drama', 'From': 'Sci-Fi', 'Somebody Somewhere': 'Comedy', 'The Orville': 'Sci-Fi', 'Zoey\'s Extraordinary Playlist': 'Musical Dramedy', 'House of the Dragon': 'Fantasy', 'Foundation': 'Sci-Fi'}; async function correctGenres() { try { const query = 'query { boards(ids: [' + boardId + ']) { groups(ids: ["new_group81872"]) { items_page { items { id name } } } } }'; const res = await monday.api(query); const items = res.data.boards[0].groups[0].items_page.items; for (const item of items) { if (genres[item.name]) { const genre = genres[item.name]; const mutation = 'mutation { change_column_value(board_id: ' + boardId + ', item_id: ' + item.id + ', column_id: "genre", value: "' + genre + '") { id } }'; await monday.api(mutation); console.log('Updated item:', item.name, 'with genre:', genre); } } console.log('All genres updated.'); } catch (error) { console.error('Failed to update genres:', error); } } correctGenres();
