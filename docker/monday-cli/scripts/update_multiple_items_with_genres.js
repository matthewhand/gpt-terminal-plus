const mondaySdk = require('monday-sdk-js'); const monday = mondaySdk(); monday.setToken(process.env.MONDAY_TOKEN); const boardId = 2809374317; const groupId = 'new_group81872'; const itemsToUpdate = [ { name: 'Dirty Jobs', genreIds: ['23718055', '23745346'] }, { name: 'It\'s Always Sunny in Philadelphia', genreIds: ['23718055'] }, { name: 'The Simpsons', genreIds: ['23718062'] }, { name: 'Berlin Station', genreIds: ['23745349', '23718056'] }, { name: 'Barry', genreIds: ['23745348', '23718056'] }, { name: 'Saturday Night Live', genreIds: ['23745344'] }, { name: 'Kroll Show', genreIds: ['23745344', '23745345'] }, { name: 'Zoey\'s Extraordinary Playlist', genreIds: ['23745347'] } ]; async function updateItemGenres() { try { const query = 'query { boards(ids: [' + boardId + ']) { groups(ids: ["' + groupId + '"]) { items_page { items { id name } } } } }'; const res = await monday.api(query); const items = res.data.boards[0].groups[0].items_page.items; for (const item of items) { const itemToUpdate = itemsToUpdate.find(i => i.name === item.name); if (itemToUpdate) { for (const genreId of itemToUpdate.genreIds) { const mutation = 'mutation { change_column_value(board_id: ' + boardId + ', item_id: ' + item.id + ', column_id: "genre6__1", value: "' + genreId + '") { id } }'; await monday.api(mutation); console.log('Updated item:', item.name, 'with genre ID:', genreId); } } } } catch (error) { console.error('Failed to update items:', error); } } updateItemGenres();
