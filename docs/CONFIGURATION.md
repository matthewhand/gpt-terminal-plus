# Configuration Details

This document provides detailed information on configuring the GPT Terminal Plus application, including environment variables and feature flags.

## Environment Variables

### Core Configuration

```ini
# Required environment variables
API_TOKEN=your_secure_api_token # Generate something HTTP friendly eg. `openssl rand -base64 48`
NODE_CONFIG_DIR=./config # Read/write required. Optional configuration files go here.
NODE_ENV=production # Which config file to load (if any).
DEBUG=true # Should things not work
```

- **`API_TOKEN`**
  - **Description**: Token used for API authentication. This token must be generated by the user to secure their endpoint authentication at the application level.
  - **Recommendation**: Generate something secure using `openssl rand -base64 48`
  - **Default**: `your_api_token_here`

- **`NODE_CONFIG_DIR`**
  - **Description**: Directory for persisting `globalState.json` and server configurations. This directory requires read/write permissions.
  - **Default**: `./config`

- **`NODE_ENV`**
  - **Description**: Specifies the environment in which the application is running.
  - **Values**: `development`, `production`
  - **Default**: `development`

- **`DEBUG`**
  - **Description**: Enables debug logging.
  - **Values**: `true`, `false`
  - **Default**: `true`

### Feature Flags

```ini
ENABLE_FILE_MANAGEMENT=true
ENABLE_COMMAND_MANAGEMENT=true
ENABLE_SERVER_MANAGEMENT=true
BACKUP_EXTENSION=.bak
```

- **`ENABLE_FILE_MANAGEMENT`**
  - **Description**: Enable or disable file management routes.
  - **Values**: `true`, `false`
  - **Default**: `true`
  - **Use Case**: Set to `false` if file management is not required for your use case.

- **`ENABLE_COMMAND_MANAGEMENT`**
  - **Description**: Enable or disable command management routes.
  - **Values**: `true`, `false`
  - **Default**: `true`
  - **Use Case**: Set to `false` if command management is not required for your use case.

- **`ENABLE_SERVER_MANAGEMENT`**
  - **Description**: Enable or disable server management routes.
  - **Values**: `true`, `false`
  - **Default**: `true`
  - **Use Case**: Set to `false` if server management is not required for your use case.

- **`BACKUP_EXTENSION`**
  - **Description**: Specifies the extension used for backup files.
  - **Default**: `.bak`

### Third-Party Service Configuration

```ini
NOTION_TOKEN=your_notion_token_here
OCI_COMPARTMENT_ID=your_oci_compartment_id_here
OCI_COMPARTMENT_NAME=your_oci_compartment_name_here
AWS_ACCESS_KEY_ID=your_aws_access_key_id_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key_here
AWS_REGION=your_aws_region_here
```

- **Notion**
  - **`NOTION_TOKEN`**
    - **Description**: Token used for Notion API authentication.
    - **Default**: `your_notion_token_here`

- **Oracle Cloud Infrastructure (OCI)**
  - **`OCI_COMPARTMENT_ID`**
    - **Description**: OCI Service Configuration - Compartment ID.
    - **Default**: `your_oci_compartment_id_here`
  - **`OCI_COMPARTMENT_NAME`**
    - **Description**: OCI Service Configuration - Compartment Name.
    - **Default**: `your_oci_compartment_name_here`

- **Amazon Web Services (AWS)**
  - **`AWS_ACCESS_KEY_ID`**
    - **Description**: AWS Service Configuration - Access Key ID.
    - **Default**: `your_aws_access_key_id_here`
  - **`AWS_SECRET_ACCESS_KEY`**
    - **Description**: AWS Service Configuration - Secret Access Key.
    - **Default**: `your_aws_secret_access_key_here`
  - **`AWS_REGION`**
    - **Description**: AWS Service Configuration - Region.
    - **Default**: `your_aws_region_here`

### Miscellaneous

```ini
SUPPRESS_NO_CONFIG_WARNING=true
DISABLE_HEALTH_LOG=false
```

- **`SUPPRESS_NO_CONFIG_WARNING`**
  - **Description**: Suppress warnings related to missing configuration.
  - **Values**: `true`, `false`
  - **Default**: `true`

- **`DISABLE_HEALTH_LOG`**
  - **Description**: Disable health log.
  - **Values**: `true`, `false`
  - **Default**: `false`

### Escape Character Configuration

```ini
ESCAPE_DOLLAR=true
ESCAPE_QUOTES=true
ESCAPE_BACKTICKS=true
ESCAPE_FORWARD_SLASH=true
ESCAPE_BACKWARD_SLASH=true
```

- **`ESCAPE_DOLLAR`**
  - **Description**: Enable or disable escaping of dollar signs.
  - **Values**: `true`, `false`
  - **Default**: `true`

- **`ESCAPE_QUOTES`**
  - **Description**: Enable or disable escaping of quotes.
  - **Values**: `true`, `false`
  - **Default**: `true`

- **`ESCAPE_BACKTICKS`**
  - **Description**: Enable or disable escaping of backticks.
  - **Values**: `true`, `false`
  - **Default**: `true`

- **`ESCAPE_FORWARD_SLASH`**
  - **Description**: Enable or disable escaping of forward slashes.
  - **Values**: `true`, `false`
  - **Default**: `true`

- **`ESCAPE_BACKWARD_SLASH`**
  - **Description**: Enable or disable escaping of backward slashes.
  - **Values**: `true`, `false`
  - **Default**: `true`


## HTTPS Configuration



- ****
  - **Description**: Enables HTTPS if set to .
  - **Values**: , 
  - **Default**: 
  - **Use Case**: Set to  to enable HTTPS.

- ****
  - **Description**: Path to the HTTPS private key file.
  - **Default**: 

- ****
  - **Description**: Path to the HTTPS certificate file.
  - **Default**: 

## HTTPS Configuration

HTTPS_ENABLED=false
HTTPS_KEY_PATH=path/to/your/private.key
HTTPS_CERT_PATH=path/to/your/certificate.crt

- **HTTPS_ENABLED**
  - **Description**: Enables HTTPS if set to .
  - **Values**: , 
  - **Default**: 
  - **Use Case**: Set to  to enable HTTPS.

- **HTTPS_KEY_PATH**
  - **Description**: Path to the HTTPS private key file.
  - **Default**: path/to/your/private.key

- **HTTPS_CERT_PATH**
  - **Description**: Path to the HTTPS certificate file.
  - **Default**: path/to/your/certificate.crt

## AI Providers and Models

The chat API uses a provider adapter with sensible defaults. LLM features are optional and disabled unless `LLM_ENABLED=true`. You can configure the provider and model mapping via your config files under the `ai` key and control the default logical model with `DEFAULT_MODEL`.

### Environment Variables

```ini
LLM_ENABLED=false
LLM_PROVIDER=none   # ollama, lmstudio, openai
DEFAULT_MODEL=gpt-oss:20b
OLLAMA_BASE_URL=http://localhost:11434   # required when LLM_PROVIDER=ollama
LMSTUDIO_BASE_URL=http://localhost:1234   # required when LLM_PROVIDER=lmstudio
OPENAI_BASE_URL=https://api.openai.com   # OpenAI or LiteLLM proxy
OPENAI_API_KEY=sk-...                    # required when LLM_PROVIDER=openai
AUTO_ANALYZE_ERRORS=true                 # ignored when LLM_ENABLED=false
```

### Config Structure (config/production.json or config/test/test.json)

```json
{
  "ai": {
    "provider": "ollama", // or "lmstudio"
    "providers": {
      "ollama": {
        "baseUrl": "http://localhost:11434",
        "modelMap": {
          "gpt-oss:20b": "llama3.1:8b-instruct"
        }
      },
      "lmstudio": {
        "baseUrl": "http://localhost:1234",
        "modelMap": {
          "gpt-oss:20b": "gpt-oss:20b"
        }
      }
    }
  }
}
```

- **`provider`**: selects which runtime to use. Supported: `ollama`, `lmstudio`.
- **`providers.ollama.baseUrl`**: your Ollama server URL.
- **`providers.lmstudio.baseUrl`**: your LM Studio server URL (OpenAI-compatible).
- **`modelMap`**: maps logical model names (e.g., `gpt-oss:20b`) to provider-specific model identifiers.

### Streaming

Set `"stream": true` in `POST /chat/completions` to receive Server-Sent Events (SSE). Each event contains a delta in the shape:

```json
{ "choices": [ { "index": 0, "delta": { "content": "..." } } ] }
```

The stream ends with:

```
data: [DONE]
```

Note: `config/production.json` may be ignored by version control per `.gitignore`. Keep your production overrides locally or manage them via deployment secrets.

### Streaming Heartbeat Interval

You can tweak the SSE heartbeat interval with an environment variable:

```ini
# Milliseconds between keep-alive comments in SSE responses
SSE_HEARTBEAT_MS=15000
```

Defaults to `15000` (15s). In tests, it defaults to `50ms`.


### Safety Policy (Confirm/Deny Patterns)

You can control which commands require confirmation or are denied outright using either environment variables or config.

- Env (takes precedence):
  - `CONFIRM_COMMAND_REGEX`: comma-separated regex patterns that trigger confirmation.
  - `DENY_COMMAND_REGEX`: comma-separated regex patterns that block execution.

- Config (fallback if env not set):
```json
{
  "safety": {
    "confirmRegex": ["rm\s+-rf", "mkfs", "shutdown", "reboot"],
    "denyRegex": [":/$"]
  }
}
```

Edit these via the Setup UI at `/setup/policy` or by modifying your config file.
